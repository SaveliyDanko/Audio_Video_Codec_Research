В ходе изучения внутреннего устройства и работы видео-кодеков `H.264`, `H.265`, `VP9`, `AV1` я получил следующие результаты: 
## <mark style="background: #D2B3FFA6;">H.264 VS H.265</mark>
`H.264 (AVC)` и `H.265 (HEVC)` – это два широко используемых стандарта видеокодирования, которые разработаны для сжатия видеофайлов, уменьшая их размер, сохраняя при этом качество изображения. H.265 был разработан как улучшение H.264, и он включает множество усовершенствований и новых функций для повышения эффективности сжатия. 

**Основные отличия между H.264 и H.265**
1. **Эффективность сжатия**
- `H.264 (AVC)`:
  - Кодек H.264 использует методы блочного кодирования, предсказания движения и трансформации для сжатия видео.
  - Средняя степень сжатия H.264 позволяет достичь хорошего качества изображения при разумных размерах файлов, но для высоких разрешений требуется значительный битрейт.

- `H.265 (HEVC)`:
  - H.265 улучшает методы блочного кодирования и предсказания движения, позволяя достичь того же уровня качества изображения при примерно половинном битрейте по сравнению с H.264.
  - Это достигается за счет более сложных алгоритмов и улучшенной архитектуры кодирования.

2. **Структура блоков**
- `H.264`:
  - Использует макроблоки размером `16x16` пикселей, которые могут быть разделены на более мелкие блоки.
  - Поддерживает блоки размера `4x4`, `8x8` и `16x16` для адаптации к различным деталям изображения.

- `H.265`:
  - Вводит Coding Tree Units (`CTU`), которые могут иметь размеры до `64x64` пикселей, обеспечивая большую гибкость и эффективность.
  - `CTU` могут быть разделены на Coding Units (CU), Prediction Units (PU) и Transform Units (TU) различных размеров (например, `64x64`, `32x32`, `16x16` и `8x8`).
  - Это позволяет более точно адаптироваться к сложным деталям изображения и снижать избыточность данных.

3. **Предсказание и компенсация движения**
- `H.264`:
  - Поддерживает до 16 опорных кадров для предсказания движения.
  - Предсказание движения основано на векторах движения с точностью до 1/4 пикселя.
  - Использует прямое и двустороннее предсказание для улучшения качества.

- `H.265`:
  - Поддерживает до 32 опорных кадров для предсказания движения, что позволяет улучшить точность и качество предсказания.
  - Векторы движения имеют точность до 1/4 и 1/8 пикселя.
  - Вводит методы амплитудной компенсации движения (AMP) и временного фильтра (Temporal Motion Vector Prediction) для повышения эффективности.

4. **Трансформация и квантование**
- `H.264`:
  - Использует дискретное косинусное преобразование (DCT) для трансформации блоков.
  - Размеры блоков для трансформации фиксированы: 4x4 и 8x8.

- `H.265`:
  - Поддерживает как DCT, так и дискретное синусное преобразование (DST) для лучшего соответствия различным типам данных.
  - Размеры блоков для трансформации могут быть 4x4, 8x8, 16x16 и 32x32, что обеспечивает большую гибкость и эффективность.

5. **Энтропийное кодирование**
- `H.264`:
  - Использует контекстно-адаптивное двоичное арифметическое кодирование (`CABAC`) и контекстно-адаптивное кодирование с изменяющейся длиной (`CAVLC`) для энтропийного кодирования.

- `H.265`:
  - Улучшает `CABAC`, делая его более эффективным за счет увеличения числа контекстных моделей и улучшенного кодирования.

6. **Адаптивная фильтрация**
- `H.264`:
  - Включает фильтр для уменьшения артефактов на границах блоков (`deblocking filter`).

- `H.265`:
  - Включает улучшенный `deblocking filter` и добавляет новый фильтр Sample Adaptive Offset (`SAO`), который корректирует ошибки квантования и улучшает качество изображения.

7. **Поддержка разрешений и частоты кадров**
- `H.264`:
  - Поддерживает разрешения до `4K UHD 3840x2160` и частоты кадров до 60 кадров в секунду.

- `H.265`:
  - Поддерживает разрешения до `8K UHD (8192x4320`) и частоты кадров до 120 кадров в секунду, что делает его более подходящим для будущих применений с высоким разрешением и частотой кадров.

8. **Применение и совместимость**
- `H.264`:
  - Широко используется в потоковом видео, видеоконференциях, видеонаблюдении и других областях.
  - Обеспечивает высокую совместимость с различными устройствами и платформами.

- `H.265`:
  - Используется в тех же областях, что и H.264, но предоставляет улучшенные возможности для приложений с высоким разрешением и эффективностью сжатия.
  - Совместимость с устройствами постепенно улучшается, но требует поддержки аппаратного декодирования для достижения наилучших результатов.

**Заключение**
H.265 представляет собой значительное улучшение по сравнению с H.264, предлагая более высокую степень сжатия при сохранении или даже улучшении качества изображения. Это достигается за счет использования более сложных и эффективных алгоритмов и методов кодирования, включая более гибкую структуру блоков, улучшенное предсказание движения, расширенные методы трансформации и квантования, а также более эффективное энтропийное кодирование и адаптивную фильтрацию. Эти усовершенствования делают H.265 более подходящим для современных и будущих приложений, требующих высокого разрешения и высокой эффективности сжатия.
## <mark style="background: #D2B3FFA6;">H.265 VS VP9</mark> 
`VP9` и `H.265 (HEVC)` – это два современных стандарта видеокодирования, разработанных для повышения эффективности сжатия видео и уменьшения битрейта при сохранении высокого качества. `VP9` был разработан Google как замена `VP8` и конкурент `H.265`, который был разработан совместными усилиями `ISO/IEC Moving Picture Experts Group (MPEG)` и `ITU-T Video Coding Experts Group` (`VCEG`). Ниже приведено подробное сравнение и отличия между `VP9` и `H.265`.

**Основные отличия между `VP9` и `H.265`**
1. **Эффективность сжатия**
- `H.265 (HEVC)`:
  - HEVC предназначен для сжатия видео с высоким качеством при меньшем битрейте по сравнению с H.264. Он достигает до 50% более высокой эффективности сжатия по сравнению с H.264.
  - HEVC использует сложные алгоритмы предсказания, трансформации и энтропийного кодирования для повышения эффективности.

- `VP9`:
  - `VP9` также улучшает эффективность сжатия по сравнению с H.264, достигая до 50% более высокой эффективности.
  - `VP9` использует аналогичные, но несколько различающиеся подходы к предсказанию, трансформации и энтропийному кодированию.

2. **Структура блоков**
- `H.265`:
  - Вводит Coding Tree Units (`CTU`) размером до `64x64` пикселей.
  - `CTU` могут быть разделены на Coding Units (CU), Prediction Units (PU) и Transform Units (TU) различных размеров (например, `64x64`, `32x32`, `16x16` и `8x8`).

- `VP9`:
  - Использует суперблоки размером до `64x64` пикселей.
  - Суперблоки могут быть разделены на меньшие блоки различных размеров (например, `32x32`, `16x16`, `8x8` и вплоть до `4x4`), что позволяет более точно адаптироваться к сложным деталям изображения.

3. **Предсказание и компенсация движения**
- `H.265`:
  - Поддерживает до 32 опорных кадров для предсказания движения.
  - Векторы движения имеют точность до 1/4 и 1/8 пикселя.
  - Вводит методы амплитудной компенсации движения (AMP) и временного фильтра (Temporal Motion Vector Prediction).

- `VP9`:
  - Поддерживает до 3 опорных кадров для предсказания движения.
  - Векторы движения имеют точность до 1/4 пикселя.
  - Использует многопоточное предсказание движения и сегментацию векторов движения для улучшения качества.

4. **Трансформация и квантование**
- `H.265`:
  - Поддерживает размеры блоков для трансформации `4x4`, `8x8`, `16x16` и `32x32`.
  - Использует как дискретное косинусное преобразование (DCT), так и дискретное синусное преобразование (DST) для повышения эффективности.

- `VP9`:
  - Поддерживает размеры блоков для трансформации `4x4`, `8x8`, `16x16` и `32x32`.
  - Использует только DCT для трансформации.

5. **Энтропийное кодирование**
- `H.265`:
  - Использует улучшенное контекстно-адаптивное двоичное арифметическое кодирование (`CABAC`), что обеспечивает высокую эффективность сжатия.

- `VP9`:
  - Использует контекстно-адаптивное бинарное арифметическое кодирование (Context-Adaptive Binary Arithmetic Coding, `CABAC`) и контекстно-адаптивное кодирование с изменяющейся длиной (Variable Length Coding, `VLC`).

6. **Адаптивная фильтрация**
- `H.265`:
  - Включает улучшенный фильтр для уменьшения артефактов на границах блоков (`deblocking filter`).
  - Включает фильтр Sample Adaptive Offset (`SAO`) для улучшения качества изображения.

- `VP9`:
  - Включает многоступенчатую фильтрацию, включая `deblocking filter` и восстановление границ (Loop Restoration).

7. **Поддержка разрешений и частоты кадров**
- `H.265:`
  - Поддерживает разрешения до `8K UHD (8192x4320)` и частоты кадров до 120 кадров в секунду.

- `VP9`:
  - Поддерживает разрешения до `8K UHD (8192x4320)` и частоты кадров до 120 кадров в секунду.

8. **Лицензирование и роялти**
- `H.265`:
  - Лицензирование H.265 требует уплаты роялти, что может быть препятствием для его широкого принятия.
  - Управляется организациями MPEG LA и HEVC Advance.

- `VP9`:
  - VP9 является открытым и бесплатным для использования, не требует уплаты роялти.
  - Продвигается и поддерживается Google.

**Заключение**
**H.265** и **VP9** оба представляют собой современные и эффективные стандарты видеокодирования, которые значительно превосходят по эффективности сжатия своих предшественников. Однако они отличаются рядом ключевых аспектов:

- **Эффективность сжатия:** Оба кодека предлагают схожую степень сжатия, но используют разные алгоритмы и методы для достижения этой цели.
- **Структура блоков:** Оба кодека используют гибкие структуры блоков для повышения эффективности, но реализация этих структур различается.
- **Предсказание движения:** `H.265` предлагает более сложные методы предсказания движения и поддержку большего числа опорных кадров, в то время как `VP9` использует менее сложные, но всё ещё эффективные методы.
- **Энтропийное кодирование:** `H.265` использует усовершенствованное `CABAC`, тогда как `VP9` использует смесь `CABAC` и `VLC`.
- **Лицензирование:** `VP9` имеет преимущество в плане отсутствия роялти, что делает его привлекательным для разработчиков и компаний, желающих избежать дополнительных затрат.

Выбор между` H.265` и `VP9` будет зависеть от конкретных требований проекта, включая эффективность сжатия, совместимость с устройствами, лицензирование и роялти.

## <mark style="background: #D2B3FFA6;">H.265 VS AV1</mark>
**Сравнение видео-кодеков `H.265` и `AV1`**
#### 1. Основные технологии и методы, используемые в кодеках
**`H.265 (HEVC - High Efficiency Video Coding)`**:
- **Intra Prediction**: Улучшенное предсказание в пределах кадра для снижения избыточности.
- **Inter Prediction**: Использование сложных методов предсказания между кадрами для повышения эффективности сжатия.
- **Transform and Quantization**: Применение DCT (Discrete Cosine Transform) и DST (Discrete Sine Transform) для преобразования пространственной информации в частотную область, с последующей квантованием для сжатия данных.
- **Loop Filters**: Использование фильтров для улучшения качества видео после декодирования.
- **Entropy Coding**: Использование методов CABAC (Context-Adaptive Binary Arithmetic Coding) для эффективного кодирования битов.

**`AV1 (AOMedia Video 1)`**:
- **Intra Prediction**: Более гибкие и сложные методы предсказания в пределах кадра.
- **Inter Prediction**: Улучшенные методы межкадрового предсказания, включая использование специальных векторов движения и сложных моделей предсказания.
- **Transform and Quantization**: Применение множества различных трансформаций и квантовок, включая KLT (Karhunen-Loeve Transform) для более эффективного сжатия.
- **Loop Filters**: Более сложные и адаптивные методы фильтрации для улучшения качества видео.
- **Entropy Coding**: Использование методов ANS (Asymmetric Numeral Systems) для более эффективного сжатия данных.

#### 2. Статистика по скорости, производительности и иным метрикам
**Скорость кодирования и декодирования**:
- **`H.265`**: Обычно имеет более высокую скорость кодирования по сравнению с AV1, но требует значительных вычислительных ресурсов для декодирования. 
- **`AV1`**: Более медленная скорость кодирования из-за сложных алгоритмов, но также требует значительных вычислительных ресурсов для декодирования. Однако, с развитием аппаратных декодеров, скорость воспроизведения AV1 улучшается.

**Эффективность сжатия**:
- **`H.265`**: Эффективнее сжимает видео по сравнению с предыдущими стандартами (H.264), обеспечивая примерно 50% экономии битрейта при сохранении того же качества.
- **`AV1`**: Обеспечивает ещё более высокую эффективность сжатия по сравнению с H.265, обеспечивая примерно на 30% меньший битрейт при том же уровне качества.

**Качество видео**:
- **`H.265`**: Обеспечивает высокое качество видео, особенно при высоких разрешениях (4K и выше).
- **`AV1`**: Обеспечивает ещё более высокое качество видео при более низких битрейтах, что особенно важно для потоковой передачи видео через интернет.

**Анализ метрик**:
- **`VMAF (Video Multi-Method Assessment Fusion)`**: Метрика, используемая для оценки восприятия качества видео.
  - **`H.265`**: Получает высокие оценки `VMAF` при низких и средних битрейтах.
  - **`AV1`**: Получает ещё более высокие оценки `VMAF`, особенно при низких битрейтах.

#### 3. Применение кодеков в различных сценариях
**H.265 (HEVC)**:
- **Трансляция и хранение видео**: Используется для трансляции видео в высоком разрешении, включая 4K и 8K, благодаря своей эффективности сжатия.
- **Съемка и производство видео**: Часто используется в профессиональном оборудовании для съемки видео высокого качества.
- **Потоковые сервисы**: Широко поддерживается на большинстве современных устройств и платформ.

**`AV1`**:
- **Потоковая передача через интернет**: Идеально подходит для потоковой передачи видео благодаря высокой эффективности сжатия, что позволяет экономить пропускную способность.
- **Мобильные устройства**: Сниженный битрейт при высоком качестве делает его отличным выбором для мобильных сетей с ограниченной пропускной способностью.
- **Поддержка открытых стандартов**: `AV1` является бесплатным и открытым стандартом, что делает его привлекательным для внедрения на широком спектре устройств и платформ.

**Заключение**
Выбор между `H.265` и `AV1` зависит от конкретных требований и условий использования. `H.265` лучше подходит для приложений, где важна поддержка на широком спектре устройств и высокая скорость кодирования. `AV1` предпочтительнее для потоковой передачи видео в интернете, где важна высокая эффективность сжатия и минимальные затраты на пропускную способность. 


## Общая информация о кодеках 
[Статья 1](https://habr.com/ru/companies/ruvds/articles/744436/)

## Сравнение `H.264` и `H.265`
[Article 1](https://papers.ssrn.com/sol3/papers.cfm?abstract_id=4104336)
[Article 2](https://flussonic.ru/blog/news/h264-vs-h265/)

## Сравнения `H.265` и `VP9`
[Article 1](https://www.sciencedirect.com/science/article/pii/S1877050917312292)

**Сравнения `H.265` и `AV1`**
[Article 1](https://www.gumlet.com/learn/av1-vs-hevc/)
[Article 2](https://flussonic.com/blog/news/h264-h265-av1/)
[Article 3](https://www.winxdvd.com/video-transcoder/av1-vs-hevc.htm)

## Quantization
[Article 1](https://www.ibc.org/download?ac=18626)

## I, P, B frames
[Article 1](https://openaccess.thecvf.com/content/ICCV2021/papers/Pourreza_Extending_Neural_P-Frame_Codecs_for_B-Frame_Coding_ICCV_2021_paper.pdf)
[Article 2](https://ottverse.com/i-p-b-frames-idr-keyframes-differences-usecases/)

## Run Length Coding
[Article 1](https://iecscience.org/uploads/jpapers/201912/7YpK6VJ1zATRlgOMJ58x6ZMKNCGPlzPp84Op1wXo.pdf)

## `Lempel-Ziv-Welch (LZW)`
[Article 1](https://citeseerx.ist.psu.edu/document?repid=rep1&type=pdf&doi=be7cb6d0d3935337fd633dc9b3667bf28904c891)
[Article 2](https://www.researchgate.net/profile/Asral-Jambek/publication/287236639_Performance_comparison_of_Huffman_and_Lempel-Ziv_welch_data_compression_for_wireless_sensor_node_application/links/5acb16880f7e9bcd5198cea8/Performance-comparison-of-Huffman-and-Lempel-Ziv-welch-data-compression-for-wireless-sensor-node-application.pdf)

## Discrete Cosine Transform (DCT)
[Article 1](https://coehuman.uodiyala.edu.iq/uploads/Coehuman%20library%20pdf/%D9%83%D8%AA%D8%A8%20%D8%A7%D9%84%D8%B1%D9%8A%D8%A7%D8%B6%D9%8A%D8%A7%D8%AA%20Mathematics%20books/Wavelets/25%20(2).pdf)

## Motion Compensation 
[Article 1](file:///home/savadanko/Downloads/Motion_Compensated_Wyner-Ziv_Video_Coding.pdf)

## Context Modeling 
[Article 1](https://proceedings.neurips.cc/paper_files/paper/2021/file/96b250a90d3cf0868c83f8c965142d2a-Paper.pdf)

## `CABAC`
[Article 1](https://www.researchgate.net/profile/Gaobo-Yang-2/publication/281717146_A_CABAC_based_HEVCc_video_steganography_algorithm_without_bitrate_increase/links/5ca1a27245851506d738ac1b/A-CABAC-based-HEVCc-video-steganography-algorithm-without-bitrate-increase.pdf)
